import{n}from"./index-b7706d49.js";const c=(s,t)=>{const o=s.__vccOpts||s;for(const[e,a]of t)o[e]=a;return o},r="http://localhost:3000",l=n("blog",{state:()=>({posts:[],currentPost:null,loading:!1,error:null}),actions:{async fetchPosts(){this.loading=!0;try{const s=await fetch(`${r}/api/posts`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);this.posts=await s.json()}catch(s){console.error("獲取文章列表失敗:",s),this.error=s.message}finally{this.loading=!1}},async fetchPost(s){this.loading=!0;try{const t=await fetch(`${r}/api/posts/${s}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.currentPost=await t.json()}catch(t){console.error("獲取文章詳情失敗:",t),this.error=t.message}finally{this.loading=!1}},async createPost(s){this.loading=!0;try{const t=await fetch(`${r}/api/posts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const o=await t.json();return this.posts.unshift(o),o}catch(t){throw console.error("創建文章失敗:",t),this.error=t.message,t}finally{this.loading=!1}}}});export{c as _,l as u};
